## Конфігурація вебсервісу

Конфігурація сервісу виконується у файлах `config.ini` та `alembic.ini`.

У випадку, коли вебсервіс було встановлено за допомогою скрипта, виконувати додаткові налаштування не потрібно.

У випадку, коли вебсервіс було встановлено вручну, необхідно відредагувати зазначені файли наступним чином:

1. У файлі `alembic.ini` необхыдно відредагувати наступний рядок:

  ```ini
  sqlalchemy.url = mariadb+mariadbconnector://user:pass@localhost/dbname
  ```
де:

- `user` – логін користувача БД;
- `pass` – пароль даного користувача;
- `dbname` – назва БД.

2. У файлі `config.ini` необхідно відредагувати секцію  `[database]`, а саме наступні параметри:

  ```ini
  type = mysql
  host = your_db_host
  port = your_db_port
  name = your_db_name
  username = your_db_user
  password = your_db_password
  ```

Значення конфігураційних параметрів для файлу `config.ini` наведено нижче:

```
[database]
# Тип бази даних, яку ви використовуєте. Можливі значення: mysql або postgres
db_type = mysql

# IP-адреса або доменне ім'я сервера бази даних
host = your_db_host

# Порт, через який здійснюється підключення до бази даних. За замовчуванням для MySQL це 3306
port = your_db_port

# Ім'я бази даних, до якої потрібно підключитися
name = your_db_name

# Ім'я користувача для підключення до бази даних
username = your_db_user

# Пароль користувача для підключення до бази даних
password = your_db_password

[logging]
# Шлях до файлу, куди буде записуватися лог
filename = path/to/soap_sync_service.log

# filemode визначає режим, в якому буде відкритий файл логування.
# 'a' - дописувати до існуючого файлу
# 'w' - перезаписувати файл кожен раз при старті програми
filemode = a

# format визначає формат повідомлень логування.
# %(asctime)s - час створення запису
# %(name)s - ім'я логгера
# %(levelname)s - рівень логування
# %(message)s - текст повідомлення
# %(pathname)s - шлях до файлу, звідки було зроблено виклик
# %(lineno)d - номер рядка у файлі, звідки було зроблено виклик
format = %(asctime)s,%(msecs)d %(name)s %(levelname)s %(message)s

# dateformat визначає формат дати в повідомленнях логування.
# Можливі формати можуть бути такими, як:
# %Y-%m-%d %H:%M:%S - 2023-06-25 14:45:00
# %d-%m-%Y %H:%M:%S - 25-06-2023 14:45:00
dateformat = %H:%M:%S

# level визначає рівень логування. Найбільш детальний це DEBUG, за замовчуванням INFO
# DEBUG - докладна інформація, корисна для відлагодження роботи, логується вміст запитів та відповідей
# INFO - загальна інформація про стан виконання програми
# WARNING - попередження про можливі проблеми
# ERROR - помилки, які завадили нормальному виконанню
# CRITICAL - критичні помилки, що призводять до завершення програми
level = DEBUG
```

Приклад файлу конфігурації `config.ini`:

```ini
[database]
# тип бази даних (mysql, postgres тощо)
type = mysql
# хост бази даних
host = 10.0.20.242
# порт бази даних
port = 3306
# ім'я бази даних
name = soap
# ім'я користувача бази даних
username = soap
# пароль до бази даних
password = 1234

[logging]
# файл для запису логів
filename = /tmp/soap_sync_service.log
# режим роботи з файлом логів (a - додати, w - перезаписати)
filemode = a
# формат запису логів
format = %(asctime)s,%(msecs)d %(name)s %(levelname)s %(message)s
# формат дати і часу в логах
dateformat = %H:%M:%S
# рівень логування (DEBUG, INFO, WARNING, ERROR, CRITICAL)
level = DEBUG
```

##
Матеріали створено за підтримки проєкту міжнародної технічної допомоги «Підтримка ЄС цифрової трансформації України (DT4UA)».
